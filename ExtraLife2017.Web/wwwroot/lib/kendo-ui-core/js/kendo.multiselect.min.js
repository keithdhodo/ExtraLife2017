/** 
 * Copyright 2017 Telerik AD                                                                                                                                                                            
 *                                                                                                                                                                                                      
 * Licensed under the Apache License, Version 2.0 (the "License");                                                                                                                                      
 * you may not use this file except in compliance with the License.                                                                                                                                     
 * You may obtain a copy of the License at                                                                                                                                                              
 *                                                                                                                                                                                                      
 *     http://www.apache.org/licenses/LICENSE-2.0                                                                                                                                                       
 *                                                                                                                                                                                                      
 * Unless required by applicable law or agreed to in writing, software                                                                                                                                  
 * distributed under the License is distributed on an "AS IS" BASIS,                                                                                                                                    
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                                                                                                             
 * See the License for the specific language governing permissions and                                                                                                                                  
 * limitations under the License.                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("kendo.multiselect.min",["kendo.list.min","kendo.mobile.scroller.min","kendo.virtuallist.min"],e)}(function(){return function(e,t){function i(e,t){var i;if(null===e&&null!==t||null!==e&&null===t)return!1;if(i=e.length,i!==t.length)return!1;for(;i--;)if(e[i]!==t[i])return!1;return!0}var a=window.kendo,n=a.ui,s=n.List,l=e.extend({A:65},a.keys),o=a._activeElement,r=a.data.ObservableArray,c=e.proxy,u="id",d="li",p="accept",_="filter",h="rebind",f="open",m="close",g="change",v="progress",w="select",T="deselect",I="aria-disabled",b="k-state-focused",k="k-state-selected",y="k-hidden",x="k-state-hover",C="k-state-disabled",V="disabled",S="readonly",D=".kendoMultiSelect",O="click"+D,L="keydown"+D,E="mouseenter"+D,A="mouseleave"+D,F=E+" "+A,B=/"/g,M=e.isArray,H=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],K=s.extend({init:function(t,i){var n,l,o=this;o.ns=D,s.fn.init.call(o,t,i),o._optionsMap={},o._customOptions={},o._wrapper(),o._tagList(),o._input(),o._textContainer(),o._loader(),o._clearButton(),o._tabindex(o.input),t=o.element.attr("multiple","multiple").hide(),i=o.options,i.placeholder||(i.placeholder=t.data("placeholder")),n=t.attr(u),n&&(o._tagID=n+"_tag_active",n+="_taglist",o.tagList.attr(u,n)),o._aria(n),o._dataSource(),o._ignoreCase(),o._popup(),o._tagTemplate(),o.requireValueMapper(o.options),o._initList(),o._reset(),o._enable(),o._placeholder(),i.autoBind?o.dataSource.fetch():i.value&&o._preselect(i.value),l=e(o.element).parents("fieldset").is(":disabled"),l&&o.enable(!1),a.notify(o),o._toggleCloseVisibility()},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:1,enforceMinLength:!1,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:!1,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:!0},events:[f,m,g,w,T,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._state="",this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){var t=this._listOptions(e);s.fn.setOptions.call(this,e),this.listView.setOptions(t),this._accessors(),this._aria(this.tagList.attr(u)),this._tagTemplate(),this._placeholder()},currentTag:function(e){var i=this;return e===t?i._currentTag:(i._currentTag&&(i._currentTag.removeClass(b).removeAttr(u),i.input.removeAttr("aria-activedescendant")),e&&(e.addClass(b).attr(u,i._tagID),i.input.attr("aria-activedescendant",i._tagID)),i._currentTag=e,t)},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typingTimeout),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),e._clear.off(t),s.fn.destroy.call(e)},_activateItem:function(){s.fn._activateItem.call(this),this.currentTag(null)},_listOptions:function(t){var i=this,n=s.fn._listOptions.call(i,e.extend(t,{selectedItemChange:c(i._selectedItemChange,i),selectable:"multiple"})),l=this.options.itemTemplate||this.options.template,o=n.itemTemplate||l||n.template;return o||(o="#:"+a.expr(n.dataTextField,"data")+"#"),n.template=o,n},_setListValue:function(){s.fn._setListValue.call(this,this._initialValues.slice(0))},_listChange:function(e){var i,a=this.dataSource.flatView(),n=this._optionsMap,s=this._value;for(this._state===h&&(this._state=""),i=0;i<e.added.length;i++)if(n[s(e.added[i].dataItem)]===t){this._render(a);break}this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t,i,a=e.items;for(i=0;i<a.length;i++)t=a[i],this.tagList.children().eq(t.index).children("span:first").html(this.tagTextTemplate(t.item))},_wrapperMousedown:function(t){var i=this,n="input"!==t.target.nodeName.toLowerCase(),s=e(t.target),l=s.hasClass("k-select")||s.hasClass("k-icon");l&&(l=!s.closest(".k-select").children(".k-i-arrow-60-down").length),!n||l&&a.support.mobileOS||t.preventDefault(),l||(i.input[0]!==o()&&n&&i.input.focus(),1===i.options.minLength&&i.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(b)},_inputFocusout:function(){var e=this;clearTimeout(e._typingTimeout),e.wrapper.removeClass(b),e._placeholder(!e.listView.selectedDataItems()[0],!0),e.close(),e._state===_&&(e._state=p,e.listView.skipUpdate(!0)),e.element.blur()},_removeTag:function(e){var i,a,n=this,s=n._state,l=e.index(),o=n.listView,r=o.value()[l],c=n.listView.selectedDataItems()[l],u=n._customOptions[r];return n.trigger(T,{dataItem:c,item:e})?(n._close(),t):(u!==t||s!==p&&s!==_||(u=n._optionsMap[r]),a=function(){n.currentTag(null),n._change(),n._close()},u===t?o.select(o.select()[l]).done(a):(i=n.element[0].children[u],i.selected=!1,o.removeAt(l),e.remove(),a()),t)},_tagListClick:function(t){var i=e(t.currentTarget);i.children(".k-i-arrow-60-down").length||this._removeTag(i.closest(d))},_clearClick:function(){var t=this;t.tagList.children().each(function(i,a){t._removeTag(e(a))}),t.input.val(""),t._search(),t.trigger("change"),t.focus()},_editable:function(t){var i=this,a=t.disable,n=t.readonly,s=i.wrapper.off(D),l=i.tagList.off(D),o=i.element.add(i.input.off(D));n||a?(a?s.addClass(C):s.removeClass(C),o.attr(V,a).attr(S,n).attr(I,a)):(s.removeClass(C).on(F,i._toggleHover).on("mousedown"+D+" touchend"+D,c(i._wrapperMousedown,i)),i.input.on(L,c(i._keydown,i)).on("paste"+D,c(i._search,i)).on("focus"+D,c(i._inputFocus,i)).on("focusout"+D,c(i._inputFocusout,i)),i._clear.on("click"+D,c(i._clearClick,i)),o.removeAttr(V).removeAttr(S).attr(I,!1),l.on(E,d,function(){e(this).addClass(x)}).on(A,d,function(){e(this).removeClass(x)}).on(O,"li.k-button .k-select",c(i._tagListClick,i)))},_close:function(){var e=this;e.options.autoClose?e.close():e.popup.position()},_filterSource:function(e,t){t||(t=this._retrieveData),this._retrieveData=!1,s.fn._filterSource.call(this,e,t)},close:function(){this._activeItem=null,this.popup.close()},open:function(){var e=this;e._request&&(e._retrieveData=!1),e._retrieveData||!e.listView.bound()||e._state===p?(e._open=!0,e._state=h,e.listView.skipUpdate(!0),e._filterSource()):e._allowOpening()&&(e.popup._hovered=!0,e.popup.open(),e._focusItem())},toggle:function(e){e=e!==t?e:!this.popup.visible(),this[e?f:m]()},refresh:function(){this.listView.refresh()},_listBound:function(){var e=this,i=e.dataSource.flatView(),a=e.listView.skip();e._render(i),e._renderFooter(),e._renderNoData(),e._toggleNoData(!i.length),e._resizePopup(),e._open&&(e._open=!1,e.toggle(e._allowOpening())),e.popup.position(),!e.options.highlightFirst||a!==t&&0!==a||e.listView.focusFirst(),e._touchScroller&&e._touchScroller.reset(),e._hideBusy(),e._makeUnselectable(),e.trigger("dataBound")},_inputValue:function(){var e=this,t=e.input.val();return e.options.placeholder===t&&(t=""),t},value:function(e){var i=this,a=i.listView,n=a.value().slice(),s=i.options.maxSelectedItems,l=a.bound()&&a.isFiltered();return e===t?n:(i.requireValueMapper(i.options,e),e=i._normalizeValues(e),null!==s&&e.length>s&&(e=e.slice(0,s)),l&&i._clearFilter(),a.value(e),i._old=a.value(),l||i._fetchData(),t)},_preselect:function(t,i){var n=this;M(t)||t instanceof a.data.ObservableArray||(t=[t]),(e.isPlainObject(t[0])||t[0]instanceof a.data.ObservableObject||!n.options.dataValueField)&&(n.dataSource.data(t),n.value(i||n._initialValues),n._retrieveData=!0)},_setOption:function(e,t){var i=this.element[0].children[this._optionsMap[e]];i&&(i.selected=t)},_fetchData:function(){var e=this,t=!!e.dataSource.view().length,i=0===e.listView.value().length;i||e._request||(e._retrieveData||!e._fetch&&!t)&&(e._fetch=!0,e._retrieveData=!1,e.dataSource.read().done(function(){e._fetch=!1}))},_isBound:function(){return this.listView.bound()&&!this._retrieveData},_dataSource:function(){var e=this,t=e.element,i=e.options,n=i.dataSource||{};n=M(n)?{data:n}:n,n.select=t,n.fields=[{field:i.dataTextField},{field:i.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._progressHandler=c(e._showBusy,e),e._errorHandler=c(e._hideBusy,e)),e.dataSource=a.data.DataSource.create(n).bind(v,e._progressHandler).bind("error",e._errorHandler)},_reset:function(){var t=this,i=t.element,a=i.attr("form"),n=a?e("#"+a):i.closest("form");n[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=n.on("reset",t._resetHandler))},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(t){var i=this;return null===t?t=[]:t&&e.isPlainObject(t)?t=[i._value(t)]:t&&e.isPlainObject(t[0])?t=e.map(t,function(e){return i._value(e)}):M(t)||t instanceof r?M(t)&&(t=t.slice()):t=[t],t},_change:function(){var e=this,t=e.value();i(t,e._old)||(e._old=t.slice(),e.trigger(g),e.element.trigger(g)),e._toggleCloseVisibility()},_click:function(e){var t=this,i=e.item;e.preventDefault(),t._select(i).done(function(){t._activeItem=i,t._change(),t._close()})},_getActiveItem:function(){return this._activeItem||e(this.listView.items()[this.listView._selectedIndices.length-1])||this.listView.focus()},_keydown:function(i){var n,s,o,r,c=this,u=i.keyCode,d=c._currentTag,p=c.listView,_=c.input.val(),h=a.support.isRtl(c.wrapper),f=c.popup.visible(),m=0;if(u===l.DOWN){if(i.preventDefault(),!f)return c.open(),p.focus()||p.focusFirst(),t;p.focus()?(!c._activeItem&&i.shiftKey&&(c._activeItem=p.focus(),m=-1),n=p.getElementIndex(c._getActiveItem()[0]),p.focusNext(),p.focus()?i.shiftKey&&c._selectRange(n,p.getElementIndex(p.focus()[0])+m):p.focusLast()):p.focusFirst()}else if(u===l.UP)f&&(!c._activeItem&&i.shiftKey&&(c._activeItem=p.focus(),m=1),n=p.getElementIndex(c._getActiveItem()[0]),p.focusPrev(),p.focus()?i.shiftKey&&c._selectRange(n,p.getElementIndex(p.focus()[0])+m):c.close()),i.preventDefault();else if(u===l.LEFT&&!h||u===l.RIGHT&&h)_||(d=d?d.prev():e(c.tagList[0].lastChild),d[0]&&c.currentTag(d));else if(u===l.RIGHT&&!h||u===l.LEFT&&h)!_&&d&&(d=d.next(),c.currentTag(d[0]?d:null));else if(i.ctrlKey&&u===l.A&&f)p._selectedIndices.length===p.items().length&&(c._activeItem=null),c._selectRange(0,p.items().length-1);else if(u===l.ENTER&&f)c._select(p.focus()).done(function(){c._change(),c._close()}),i.preventDefault();else if(u===l.SPACEBAR&&i.ctrlKey&&f)c._activeItem&&p.focus()[0]===c._activeItem[0]&&(c._activeItem=null),e(p.focus()[0]).hasClass(k)||(c._activeItem=p.focus()),c._select(p.focus()).done(function(){c._change()});else if(u===l.SPACEBAR&&i.shiftKey&&f)s=p.getElementIndex(c._getActiveItem()[0]),o=p.getElementIndex(p.focus()[0]),c._selectRange(s,o),i.preventDefault();else if(u===l.ESC)f?i.preventDefault():c.tagList.children().each(function(t,i){c._removeTag(e(i))}),c.close();else if(u===l.HOME)f?(i.ctrlKey&&i.shiftKey&&c._selectRange(p.getElementIndex(p.focus()[0]),0),p.focusFirst()):_||(d=c.tagList[0].firstChild,d&&c.currentTag(e(d)));else if(u===l.END)f?(i.ctrlKey&&i.shiftKey&&c._selectRange(p.getElementIndex(p.focus()[0]),p.element.children().length-1),p.focusLast()):_||(d=c.tagList[0].lastChild,d&&c.currentTag(e(d)));else if(u!==l.DELETE&&u!==l.BACKSPACE||_)!c.popup.visible()||u!==l.PAGEDOWN&&u!==l.PAGEUP?(clearTimeout(c._typingTimeout),setTimeout(function(){c._scale()}),c._search()):(i.preventDefault(),r=u===l.PAGEDOWN?1:-1,p.scrollWith(r*p.screenHeight()));else{if("single"===c.options.tagMode)return p.value([]),c._change(),c._close(),t;u!==l.BACKSPACE||d||(d=e(c.tagList[0].lastChild)),d&&d[0]&&c._removeTag(d)}},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(y),e._request=!1,e._busy=null,e._showClear()},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(y),this._hideClear()},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(c(e._showBusyHandler,e),100))},_placeholder:function(e,i){var n=this,s=n.input,l=o(),r=n.options.placeholder,c=s.val(),u=s[0]===l,d=c.length;u&&!n.options.autoClose&&c!==r||(d=0,c=""),e===t&&(e=!1,s[0]!==l&&(e=!n.listView.selectedDataItems()[0])),n._prev=c,s.toggleClass("k-readonly",e).val(e?r:c),u&&!i&&a.caret(s[0],d,d),n._scale()},_scale:function(){var e,t=this,i=t.wrapper.find(".k-multiselect-wrap"),a=i.width(),n=t._span.text(t.input.val());i.is(":visible")?e=n.width()+25:(n.appendTo(document.documentElement),a=e=n.width()+25,n.appendTo(i)),t.input.width(e>a?a:e)},_option:function(e,i,n){var s="<option";return e!==t&&(e+="",e.indexOf('"')!==-1&&(e=e.replace(B,"&quot;")),s+=' value="'+e+'"'),n&&(s+=" selected"),s+=">",i!==t&&(s+=a.htmlEncode(i)),s+="</option>"},_render:function(e){var t,i,a,n,s,l,o=this.listView.selectedDataItems(),r=this.listView.value(),c=e.length,u="";for(r.length!==o.length&&(o=this._buildSelectedItems(r)),s={},l={},n=0;n<c;n++)i=e[n],a=this._value(i),t=this._selectedItemIndex(a,o),t!==-1&&o.splice(t,1),l[a]=n,u+=this._option(a,this._text(i),t!==-1);if(o.length)for(n=0;n<o.length;n++)i=o[n],a=this._value(i),s[a]=c,l[a]=c,c+=1,u+=this._option(a,this._text(i),!0);this._customOptions=s,this._optionsMap=l,this.element.html(u)},_buildSelectedItems:function(e){var t,i,a=this.options.dataValueField,n=this.options.dataTextField,s=[];for(i=0;i<e.length;i++)t={},t[a]=e[i],t[n]=e[i],s.push(t);return s},_selectedItemIndex:function(e,t){for(var i=this._value,a=0;a<t.length;a++)if(e===i(t[a]))return a;return-1},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e._inputValue();e._prev!==t&&(e._prev=t,e.search(t),e._toggleCloseVisibility())},e.options.delay)},_toggleCloseVisibility:function(){this.value().length||this.input.val()&&this.input.val()!==this.options.placeholder?this._showClear():this._hideClear()},_allowOpening:function(){return this._allowSelection()&&s.fn._allowOpening.call(this)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this.listView.value().length},_angularTagItems:function(t){var i=this;i.angular(t,function(){return{elements:i.tagList[0].children,data:e.map(i.dataItems(),function(e){return{dataItem:e}})}})},_selectValue:function(e,t){var i,a,n,s=this,l=s.value(),o=s.dataSource.total(),r=s.tagList,c=s._value;if(s._angularTagItems("cleanup"),"multiple"===s.options.tagMode){for(n=t.length-1;n>-1;n--)i=t[n],r[0].removeChild(r[0].children[i.position]),s._setOption(c(i.dataItem),!1);for(n=0;n<e.length;n++)a=e[n],r.append(s.tagTemplate(a.dataItem)),s._setOption(c(a.dataItem),!0)}else{for((!s._maxTotal||s._maxTotal<o)&&(s._maxTotal=o),r.html(""),l.length&&r.append(s.tagTemplate({values:l,dataItems:s.dataItems(),maxTotal:s._maxTotal,currentTotal:o})),n=t.length-1;n>-1;n--)s._setOption(c(t[n].dataItem),!1);for(n=0;n<e.length;n++)s._setOption(c(e[n].dataItem),!0)}s._angularTagItems("compile"),s._placeholder()},_select:function(t){var i,a,n,s,l=e.Deferred().resolve();return t?(i=this,a=i.listView,n=a.dataItemByIndex(a.getElementIndex(t)),s=t.hasClass("k-state-selected"),i._state===h&&(i._state=""),i._allowSelection()?i.trigger(s?T:w,{dataItem:n,item:t})?(i._close(),l):a.select(t).done(function(){i._placeholder(),i._state===_&&(i._state=p,a.skipUpdate(!0))}):l):l},_selectRange:function(t,i){var a,n,s=this,l=s.listView,o=l._selectedIndices.slice(),r=function(e){l._selectedIndices.indexOf(e)==-1?o.push(e):o.splice(o.indexOf(e),1)};if(t<i)for(a=t;a<=i;a++)r(a);else for(n=t;n>=i;n--)r(n);return l.select(o).done(function(){o.forEach(function(t){var i=l.dataItemByIndex(t),a=l.element.children()[t],n=e(a).hasClass("k-state-selected");s.trigger(n?w:T,{dataItem:i,item:a})}),s._change()})},_input:function(){var t=this,i=t.element,a=i[0].accessKey,n=t._innerWrapper.children("input.k-input");n[0]||(n=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),i.removeAttr("accesskey"),t._focused=t.input=n.attr({accesskey:a,autocomplete:"off",role:"listbox",title:i[0].title,"aria-expanded":!1})},_tagList:function(){var t=this,i=t._innerWrapper.children("ul");i[0]||(i=e('<ul role="listbox" deselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=i},_tagTemplate:function(){var e,t=this,i=t.options,n=i.tagTemplate,s=i.dataSource,l="multiple"===i.tagMode;t.element[0].length&&!s&&(i.dataTextField=i.dataTextField||"text",i.dataValueField=i.dataValueField||"value"),e=l?a.template("#:"+a.expr(i.dataTextField,"data")+"#",{useWithBlock:!1}):a.template("#:values.length# item(s) selected"),t.tagTextTemplate=n=n?a.template(n):e,t.tagTemplate=function(e){return'<li class="k-button" deselectable="on"><span deselectable="on">'+n(e)+'</span><span unselectable="on" aria-label="'+(l?"delete":"open")+'" class="k-select"><span class="k-icon '+(l?"k-i-close":"k-i-arrow-60-down")+'"></span></span></li>'}},_loader:function(){this._loading=e('<span class="k-icon k-i-loading '+y+'"></span>').insertAfter(this.input)},_clearButton:function(){this._clear=e('<span deselectable="on" class="k-icon k-clear-value k-i-close" title="clear"></span>').attr({role:"button",tabIndex:-1}),this.options.clearButton&&(this._clear.insertAfter(this.input),this.wrapper.addClass("k-multiselect-clearable"))},_textContainer:function(){var t=a.getComputedStyles(this.input[0],H);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,i=t.element,a=i.parent("span.k-multiselect");a[0]||(a=i.wrap('<div class="k-widget k-multiselect k-header" deselectable="on" />').parent(),a[0].style.cssText=i[0].style.cssText,a[0].title=i[0].title,e('<div class="k-multiselect-wrap k-floatwrap" deselectable="on" />').insertBefore(i)),t.wrapper=a.addClass(i[0].className).css("display",""),t._innerWrapper=e(a[0].firstChild)}});n.plugin(K)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.multiselect.min.js.map
